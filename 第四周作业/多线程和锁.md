# **题目 01- 请你说一说什么是线程和进程？**

## 概念

&#x9;进程：操作系统资源分配的最小单位，一个进程拥有的资源有自己的堆、栈、虚存空间，文件描述符等信息。

&#x9;线程：操作系统能够进行运算的最小单元，它被包含在进程中，是进程中实际运行的单位，一个进程可以并发多个线程，每个线程执行不同的任务。



## 区别

&#x9;1.进程是操作系统进行资源分配的最小单元，线程是操作系统进运算调度的最小单元。

&#x9;2.每个进程拥有自己的内存和资源，一个进程中的多个线程 会共享这些内存和资源。

&#x9;3.进程的创建、切换、销毁远大于线程



## 关系

&#x9;进程中包含了线程，线程属于进程。



## 线程的上下文切换是什么？

&#x9;线程上下文切换的是任务切换，或者CPU寄存器切换。当线程切换的时候，线程会保存运行的当前状态，也就是把CPU寄存器中的全部内容都保存在自己的堆栈中，当该线程重新执行的时候，

&#x20;  将保存在堆栈信息中信息重新写入CPU寄存器，并继续执行之前的任务。这个过程称作线程的上下文切换。

## 线程的并发与并行有啥区别？

&#x9;线程并发：单核CPU中，同一时刻只能有一个线程能够获得CPU去执行任务，多个线程去争夺CPU，这种通过线程上下文切换的运行方式叫做并发。

&#x9;线程并行：对月多核CPU，同一时间，可以多个线程同时执行，这种同一时刻可以多个线程同时执行的方式叫做并行。



# **题目 02- 使用了多线程会带来什么问题呢？**

## 能不能详细说说线程安全问题？

&#x9;因为系统对线程的调度是抢占式的，导致线程的执行顺序可能不一致，从而影响了程序的执行结果，导致程序出现BUG。这种由于多线程并发执行导致程序BUG的，我们称作线程安全问题。



## 原子性、有序性和可见性能不能深入的谈一下。

&#x9;原子性：再一次或者多次操作时，要么所有操作都被执行，要么所有操作都不被执行。

&#x9;有序性：程序执行的顺序按照代码的先后顺序执行。

&#x9;可见性：当一个线程对共享变量进行修改后，另外的线程可以立即看到该变量的更改值。

# **题目 03- 什么是死锁？如何排查死锁?**

&#x9;死锁：由于资源无法释放导致其他线程无限期等待。

&#x9;死锁产生的四个必要条件

&#x9;	1\.	互斥使用：当资源被一个线程使用或者占用时，别的线程不能使用该资源。

&#x9;	2.不可抢占：获取资源的一方不能从正在使用资源的一方抢占资源，资源只能被使用者释放。

&#x9;	3.请求和保持：资源请求者在请求别的资源时，同时保持对已有资源的占有。

&#x9;	4.循环等待：A有B的资源，B有A的资源，形成循环依赖。

&#x9;如何排查死锁

&#x9;	方案一.jstack -l pid

&#x9;	方案二：jconsole检查死锁

&#x9;	方案三：jvisualvm

&#x9;	方案四：jmc

&#x9;	方案五：通过jmap工具dump获取栈的快照文件，然后通过栈分析工具分析，比如Memory Analyzer。
